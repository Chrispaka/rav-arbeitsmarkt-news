<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Arbeitsmarkt News & Stellen Meilen – RAV</title>
<style>
body { font-family: Arial; margin:0; background:#f5f5f5; }
header { background:#A8D5BA; padding:20px; text-align:center; font-size:24px; }
.filters { text-align:center; margin:15px; }
.filters button { padding:8px 14px; margin:5px; border:none; border-radius:6px; cursor:pointer; }
.news, .jobs { display:grid; grid-template-columns:repeat(auto-fill,minmax(280px,1fr)); gap:15px; padding:20px; }
.card { padding:15px; border-radius:10px; background:white; box-shadow:0 2px 6px rgba(0,0,0,0.1); }
.allgemein { background:#A8D5BA; }
.regional { background:#FBC4AB; }
.national { background:#FFE9A8; }
.branchen { background:#C3C9E4; }
.trends { background:#D6E4C3; }
.jobs .ict { background:#C3D6E4; }
.jobs .banking { background:#C3E4C3; }
.jobs .verkauf_kv { background:#E4E0C3; }
.jobs .marketing { background:#E4C3D6; }
.jobs .gastronomie { background:#FDE0C3; }
.jobs .fuehrung { background:#E4E0C3; }
.hidden { display:none; }
.stats { display:flex; justify-content:center; gap:20px; margin:15px; }
.stat-card { background:white; padding:15px; border-radius:10px; box-shadow:0 2px 6px rgba(0,0,0,0.1); text-align:center; width:150px; }
</style>
</head>
<body>

<header>Arbeitsmarkt News & Stellen Meilen – RAV</header>

<!-- Filter News -->
<div class="filters">
  <button onclick="filterNews('all')">Alle News</button>
  <button onclick="filterNews('allgemein')">Allgemein</button>
  <button onclick="filterNews('regional')">Regional Zürich</button>
  <button onclick="filterNews('national')">National</button>
  <button onclick="filterNews('branchen')">Arbeitsmarkt</button>
  <button onclick="filterNews('trends')">Trends & Tipps</button>
</div>

<!-- Arbeitslosenquote -->
<div class="stats" id="stats"></div>

<!-- News -->
<div class="news" id="news"></div>

<!-- Stellenangebote -->
<h2 style="text-align:center; margin-top:20px;">Aktuelle Stellen Meilen & Umgebung</h2>
<div class="filters">
  <button onclick="filterJobs('all')">Alle</button>
  <button onclick="filterJobs('ict')">ICT & Software</button>
  <button onclick="filterJobs('banking')">Banking & Finance</button>
  <button onclick="filterJobs('verkauf_kv')">Verkauf & KV</button>
  <button onclick="filterJobs('marketing')">Marketing & Kommunikation</button>
  <button onclick="filterJobs('gastronomie')">Gastronomie & Hotellerie</button>
  <button onclick="filterJobs('fuehrung')">Führungsstellen / Management</button>
</div>
<div class="jobs" id="jobs"></div>

<script>
// ------------------ News laden ------------------
function loadNews(){
  fetch('news.json')
    .then(r => r.json())
    .then(data => {
      const n = document.getElementById("news");
      n.innerHTML = '';
      data.forEach(i=>{
        const d = document.createElement("div");
        d.className = `card ${i.category}`;
        d.innerHTML = `<b>${i.title}</b><br>${i.description}`;
        n.appendChild(d);
      });
    });
}

function filterNews(cat){
  document.querySelectorAll(".news .card").forEach(c=>{
    c.classList.toggle("hidden", cat!=="all" && !c.classList.contains(cat));
  });
}

// ------------------ Jobs laden ------------------
function loadJobs(){
  fetch('jobs.json')
    .then(r => r.json())
    .then(data => {
      const j = document.getElementById("jobs");
      j.innerHTML = '';
      data.forEach(i=>{
        const d = document.createElement("div");
        d.className = `card ${i.category}`;
        d.innerHTML = `
          <b>${i.title}</b><br>
          <small>${i.location} | Aufgeschaltet: ${i.posted}</small><br>
          ${i.description}
        `;
        j.appendChild(d);
      });
    });
}

function filterJobs(cat){
  document.querySelectorAll(".jobs .card").forEach(c=>{
    c.classList.toggle("hidden", cat!=="all" && !c.classList.contains(cat));
  });
}

// ------------------ Arbeitslosenzahlen ------------------
function loadStats(){
  const stats = document.getElementById("stats");
  stats.innerHTML = '';

  const schweiz = document.createElement("div");
  schweiz.className = 'stat-card';
  schweiz.innerHTML = `
    <b>Schweiz</b><br>
    Arbeitslosenquote: 3,2 %<br>
    Stellensuchendenquote: 4,9 % (aktuell SECO)
  `;

  const zurich = document.createElement("div");
  zurich.className = 'stat-card';
  zurich.innerHTML = `
    <b>Kanton Zürich</b><br>
    Arbeitslosenquote: 2,9 %
  `;

  stats.append(schweiz, zurich);
}


// ------------------ Auto-Update ------------------
function autoUpdate(){
  const now = new Date();
  const h = now.getHours();
  if(h >= 6 && h <= 19){
    loadNews();
    loadJobs();
    loadStats();
  }
}

// Initial
autoUpdate();
// Alle 4 Stunden erneut laden
setInterval(autoUpdate, 4*60*60*1000);
</script>

</body>
</html>
